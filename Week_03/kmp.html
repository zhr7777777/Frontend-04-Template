<script>
  const kmp = (pattern, source) => {
    let table = new Array(pattern.length).fill(0)
    // console.log(table)
    let i = 1, j = 0
    while (i < pattern.length) {
      if (pattern[i] === pattern[j]) {
        table[i] = j + 1
        i++
        j++
      } else {
        if (j === 0) {
          i++
        } else {
          j = table[j-1]
        }
      }
    }
    console.log(table)

    let m = 0
    let n = 0
    while(n < source.length) {
      if(pattern[m] === source[n]) {
        m++
        n++
      } else {
        if(m === 0) {
          n++
        } else {
          m = table[m - 1]
        }
      }
      if(m === pattern.length) return true
    }
    return false
  }
  console.log(kmp('abbaaba', 'abbaabbaaba'))
  console.log(kmp('ll', 'Helxlo'))
  console.log(kmp('abcdabce', 'abcdabcdabcex'))
  console.log(kmp('aabaaac', 'aabaabaaacx'))
  console.log(kmp('abc', 'abc'))
</script>

